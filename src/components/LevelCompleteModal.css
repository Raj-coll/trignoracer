/*
==========================================================================
  GLOSSY CANDY POP THEME - Level Complete Modal Styles
  (Updated with glossy/3D effects and a new color palette)
==========================================================================
*/

:root {
  --modal-width: min(90vw, 520px);
  --star-size: clamp(38px, 10vw, 55px);

  /* Candy Pop Theme Colors */
  --candy-bg: #FFF8F0;
  --candy-border: #FF6B81;
  --candy-border-shadow: #E0445A;
  --candy-text-dark: #4A2C6E;
  --candy-text-light: #FFFFFF;
  --candy-text-shadow: rgba(0, 0, 0, 0.15);

  --star-color-empty: #E0D8E4;
  --star-color-filled: #FFD700;
  --star-shine-color: rgba(255, 255, 255, 0.8);

  --progress-bar-bg: #F0E4F2;
  --progress-bar-fill: #FF69B4;

  --btn-next-bg: #2ED573;
  --btn-next-shadow: #209E56;
  --btn-retry-bg: #FFA502;
  --btn-retry-shadow: #CD8500;
  
  /* UPDATED: New baby blue color for the Home button */
  --btn-home-bg: #89CFF0;      /* Baby Blue */
  --btn-home-shadow: #5A9BBF;   /* Darker Baby Blue for shadow */
}

/* 1. Full-screen Overlay & Fade-in Animation (No changes) */
.level-complete-overlay {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: grid;
  place-items: center;
  background-color: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0s 0.3s;
}

.level-complete-overlay.open {
  opacity: 1;
  visibility: visible;
  transition: opacity 0.3s ease;
}

/* 2. Modal Card & Scale-up Animation (No changes) */
.level-complete-card {
  width: var(--modal-width);
  padding: clamp(1rem, 4vw, 2rem);
  border-radius: 24px;
  color: var(--candy-text-dark);
  background: var(--candy-bg);
  border: 4px solid var(--candy-border);
  border-bottom: 8px solid var(--candy-border-shadow);
  box-shadow: 0 10px 20px rgba(0,0,0,0.2);
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: clamp(0.6rem, 2.5vw, 1rem);
  transform: scale(0.95);
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.level-complete-overlay.open .level-complete-card {
  transform: scale(1);
}

/* 3. Modal Content: Title and Score (No changes) */
.level-title {
  font-size: clamp(1.7rem, 7vw, 2.5rem);
  font-weight: 800;
  margin: 0;
  color: var(--candy-text-dark);
  text-shadow: 1px 2px 3px var(--candy-text-shadow);
}
.score-wrap { display: flex; flex-direction: column; align-items: center; line-height: 1; }
.score { font-size: clamp(2.8rem, 13vw, 4.8rem); font-weight: 800; text-shadow: 1px 3px 4px var(--candy-text-shadow); }
.score-label { font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.9; margin-top: 0.2rem; }

/* 4. Star Display & Animations */
.stars { display: flex; gap: 0.75rem; }

.star {
  position: relative;
  width: var(--star-size);
  height: var(--star-size);
  background-color: var(--star-color-empty);
  clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
  
  /* UPDATED: Added an inset shadow to create a 3D, beveled look */
  box-shadow: inset 0 2px 2px rgba(255,255,255,0.4), inset 0 -2px 3px rgba(0,0,0,0.2);
  filter: drop-shadow(2px 3px 2px var(--candy-text-shadow));
}

/* --- Star animation triggers remain unchanged --- */
.star::after { content: ''; position: absolute; inset: 0; background-color: var(--star-color-filled); clip-path: inherit; transform: scale(0); transform-origin: center; }
.star::before { content: ''; position: absolute; top: 0; left: 0; width: 50%; height: 100%; background: linear-gradient(to right, transparent 0%, var(--star-shine-color) 50%, transparent 100%); transform: translateX(-150%) skewX(-20deg); opacity: 0; }
.stars-1 .star:nth-child(1)::after, .stars-2 .star:nth-child(1)::after, .stars-3 .star:nth-child(1)::after { animation: fillStar 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0.5s forwards; }
.stars-1 .star:nth-child(1):before, .stars-2 .star:nth-child(1):before, .stars-3 .star:nth-child(1):before { animation: starShine 1s ease-in-out 0.8s forwards; }
.stars-2 .star:nth-child(2)::after, .stars-3 .star:nth-child(2)::after { animation: fillStar 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0.8s forwards; }
.stars-2 .star:nth-child(2)::before, .stars-3 .star:nth-child(2)::before { animation: starShine 1s ease-in-out 1.1s forwards; }
.stars-3 .star:nth-child(3)::after { animation: fillStar 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55) 1.1s forwards; }
.stars-3 .star:nth-child(3)::before { animation: starShine 1s ease-in-out 1.4s forwards; }

/* 5. Progress Bar (No changes) */
.progress { width: 80%; max-width: 300px; height: 14px; background-color: var(--progress-bar-bg); border-radius: 14px; overflow: hidden; border: 2px solid #E0D8E4; box-shadow: inset 0 2px 4px rgba(0,0,0,0.2); }
.progress-bar { width: 100%; height: 100%; background: var(--progress-bar-fill); border-radius: 10px; transform: scaleX(0); transform-origin: left; transition: transform 0.8s ease-out 1.5s; }
.level-complete-overlay.open .progress-bar { transform: scaleX(1); }

/* 6. Action Buttons */
.actions { display: flex; justify-content: center; gap: 0.75rem; flex-wrap: wrap; width: 100%; margin-top: 0.5rem; }

.btn {
  padding: 0.8rem clamp(1.2rem, 4vw, 1.8rem); 
  border-radius: 50px;
  border: none;
  font-size: 1rem;
  font-weight: 800;
  color: var(--candy-text-light);
  cursor: pointer;
  text-shadow: 1px 1px 1px rgba(0,0,0,0.3);
  transition: transform 0.1s ease, box-shadow 0.1s ease;
  
  /* UPDATED: Added relative positioning and overflow hidden for the gloss effect */
  position: relative;
  overflow: hidden;
}

/* UPDATED: This pseudo-element creates the glossy highlight on the buttons */
.btn::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -25%;
  width: 150%;
  height: 100%;
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.5) 0%,
    rgba(255, 255, 255, 0) 100%
  );
  transform: rotate(25deg);
}

.btn:active {
  transform: translateY(5px);
  box-shadow: none !important;
}

.btn.next { 
  background-color: var(--btn-next-bg);
  box-shadow: 0 5px 0 0 var(--btn-next-shadow);
}
.btn.retry {
  background-color: var(--btn-retry-bg);
  box-shadow: 0 5px 0 0 var(--btn-retry-shadow);
}
.btn.home {
  background-color: var(--btn-home-bg);
  box-shadow: 0 5px 0 0 var(--btn-home-shadow);
}


/* 7. Keyframes & Accessibility (No changes) */
@keyframes fillStar { from { transform: scale(0); } to { transform: scale(1); } }
@keyframes starShine { 0% { transform: translateX(-150%) skewX(-20deg); opacity: 0; } 50% { transform: translateX(0%) skewX(-20deg); opacity: 1; } 100% { transform: translateX(150%) skewX(-20deg); opacity: 0; } }
@media (prefers-reduced-motion: reduce) { .level-complete-card, .level-complete-overlay, .progress-bar, .btn { transition: none; } .star::after, .star::before { animation: none !important; } .stars-1 .star:nth-child(1)::after, .stars-2 .star:nth-child(n+1):nth-child(-n+2)::after, .stars-3 .star:nth-child(n+1):nth-child(-n+3)::after { transform: scale(1); } .level-complete-overlay.open .progress-bar { transform: scaleX(1); } .btn:hover { transform: none; } }